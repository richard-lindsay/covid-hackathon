(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/headerimg.16d5a4f4.png"},12:function(e,t,n){e.exports=n.p+"static/media/canvas.21421f34.jpeg"},24:function(e,t,n){e.exports=n.p+"static/media/face.4809883a.png"},25:function(e,t,n){e.exports=n.p+"static/media/ghost.2568a3f5.png"},26:function(e,t,n){e.exports=n.p+"static/media/daycanvas.1ec1becf.jpg"},29:function(e,t,n){e.exports=n(47)},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(8),i=n.n(o),l=n(9),c=n(4),u={users:[],currentUser:{username:"",position:[0,0]},gameState:"G_S_PREGAME"},s=Object(l.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"JOINED":return Object(c.a)({},e,{users:t.payload.users,currentUser:t.payload.currentUser,gameState:t.payload.gameState});case"USERS_CHANGED":return Object(c.a)({},e,{users:t.payload.users});default:return Object(c.a)({},e)}}),d=n(3),f=n(18),m=n(19),h=n(10),p=n(27),g=n(28),b=n(14),v=n(20),y=n(7),w=n(11),E=n.n(w),O=n(2),S=n(1);function x(){var e=Object(O.a)(["\n"]);return x=function(){return e},e}function k(){var e=Object(O.a)([" \n\talign-self: center;\n\theight: ",";\n\n"]);return k=function(){return e},e}function j(){var e=Object(O.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\theight: ",";\n\tpadding: 20px;\n\tfont-family: monospace;\n\tfont-size: 20px;\n\tbackground-color: #2ed1f7;\n\tjustify-content: space-between;\n\tcolor: white;\n\n"]);return j=function(){return e},e}var U=S.b.div(j(),"90px"),N=S.b.img(k(),"90px"),M=S.b.button(x());function C(){var e=Object(O.a)(["\n"]);return C=function(){return e},e}function I(){var e=Object(O.a)(["\nfont-size: 20px\ntext-transform: uppercase;\nfont-weight: 700;\n"]);return I=function(){return e},e}function J(){var e=Object(O.a)(["\n\tfont-size: 16px;\n\tline-height: 15px;\n\tmargin: 5px 0 5px 0px;\n"]);return J=function(){return e},e}function T(){var e=Object(O.a)(["\n\theight: 150px;\n\twidth: 150px;\n\tborder-radius: 50%;\n\toverflow: hidden;\n"]);return T=function(){return e},e}function _(){var e=Object(O.a)(["\n\theight: calc(100vh - ",");\n\twidth: 100%;\n\toverflow-y: auto;\n\tbackground: #eee;\n\tmargin: auto;\n\tpadding: 10px;\n\tfont-family: monospace;\n\tfont-sixe:\n"]);return _=function(){return e},e}function R(){var e=Object(O.a)(["\n\twidth: 100%;\n"]);return R=function(){return e},e}function G(){var e=Object(O.a)(["\n\tbackground-color: #fff;\n\tmargin: 30px auto auto auto;\n\tpadding: 50px 60px;\n\twidth: 500px;\n"]);return G=function(){return e},e}var D=S.b.div(G()),W=S.b.div(R()),A=S.b.div(_(),"90px"),z=S.b.img(T()),L=S.b.p(J()),H=Object(S.b)(L)(I()),P=S.b.div(C()),Y=function(e){var t=e.logInUser,n=Object(r.useState)(""),o=Object(y.a)(n,2),i=o[0],l=o[1];return a.a.createElement(A,null,a.a.createElement(W,null,a.a.createElement(D,null,a.a.createElement("div",{className:"account__profile"},a.a.createElement(z,{src:E.a,size:64}),a.a.createElement(H,null,"Hello, villager!"),a.a.createElement(L,null,"Welcome to St George's Village, please input your name to enter.")),a.a.createElement("input",{name:"username",onChange:function(e){return l(e.target.value)},value:i,className:"form-control"}),a.a.createElement("button",{type:"button",onClick:function(){return t(i)},className:"btn btn-primary account__btn"},"Join"))),a.a.createElement(P,null,a.a.createElement("h3",null,"The Roles: "),a.a.createElement("p",null,a.a.createElement("strong",null,"Mafia: "),"Will kill other players and try to convince other players who the mafia is without revealing themselves"),a.a.createElement("p",null,a.a.createElement("strong",null,"Doctor: "),"Can save themself and others"),a.a.createElement("p",null,a.a.createElement("strong",null,"Detective: "),"Chooses any other player and will be told if the player is a member of the mafia or not; uses their power to sway public opinion"),a.a.createElement("p",null,a.a.createElement("strong",null,"Villager: "),"The most basic role, who votes and tries to figure out the mafias and vote them off"),"Obviously you don't want to reveal your roles of you have an important one but rather convince others you are a villager.",a.a.createElement("br",null),a.a.createElement("h3",null,"Rules and gameplay:"),"Once all players are in, select start game then trigger night. Throughout the night, the mafia will choose to kill a player, the doctor will try to save a player and the detetive will try to discover who the mafia is. You must move your player to select the closest player to perform an action on (mafia: kill; doctor: save; detective: check; all: lynch)",a.a.createElement("br",null),"Once all night time events have taken place, it will become day time again and you will discover who, if anyone, has died. During day time you need to decide who the collective village belives is the Mafia and one person must choose to lynch one player.",a.a.createElement("br",null),"The aim of the game is for your 'team' to win: if you are mafia you want a village left with more mafia than villagers. If you are a villager you want to kill all the mafia.",a.a.createElement("br",null),a.a.createElement("br",null),"Mafia can only choose one target per round (all mafia vote on 1 target, one mafia member selects kill) Showing your screen to other players is cheating.",a.a.createElement("br",null),a.a.createElement("strong",null,"IMPORTANT:")," In real life, the dead can not speak. Common saying of course. So in the game, the dead are not allowed to influence the town through speech or physical gestures. It is cheating."))},F=Object(d.b)(function(e){return{currentUser:e.currentUser,gameState:e.gameState}})(function(e){var t=e.currentUser,n=void 0===t?{}:t,r=e.gameState,o=e.triggerNightTime;return a.a.createElement(U,null,a.a.createElement("div",null,a.a.createElement(N,{src:E.a}),n.username?a.a.createElement("span",null," Hello, ",n.username):a.a.createElement("span",null," Hello! Welcome to St George's Village.")),"G_S_START"===r&&n.role&&"unassigned"!==n.role&&a.a.createElement(M,{onClick:o},"Trigger Night Time"),n.username&&a.a.createElement("span",null,n.role&&"unassigned"!==n.role?"You ".concat("alive"===n.status?"are":"were"," a ").concat(n.role,". ").concat("alive"!==n.status?"You are now dead":""):"Wait for your role to be dealt!"))}),K=n(24),V=n.n(K),B=n(25),X=n.n(B),q=n(26),Q=n.n(q),Z=n(12),$=n.n(Z);function ee(){var e=Object(O.a)([" \n\twidth: 75%;\n"]);return ee=function(){return e},e}function te(){var e=Object(O.a)(["\n\theight: 110%;\n\twidth: 100%;\n\tbackground: url(",") repeat 0 0;\n\tbackground-size: cover;\n"]);return te=function(){return e},e}function ne(){var e=Object(O.a)(["\n\tdisplay: none;\n"]);return ne=function(){return e},e}S.b.img(ne());var re=S.b.canvas(te(),function(e){return e.night?$.a:Q.a}),ae=S.b.div(ee()),oe=Object(d.b)(function(e){return{users:e.users,currentUser:e.currentUser,gameState:e.gameState}})(function(e){var t,n,o,i,l=e.users,c=e.currentUser,u=e.client,s=e.gameState,d=Object(r.useState)(c.position[0]),f=Object(y.a)(d,2),m=f[0],h=f[1],p=Object(r.useState)(c.position[1]),g=Object(y.a)(p,2),b=g[0],v=g[1],w=Object(r.useRef)(null),E=Object(r.useRef)(null),O=Object(r.useRef)(null);Object(r.useEffect)(function(){return n=w.current,t=n.getContext("2d"),window&&window.addEventListener("keydown",S,!1),function(){return window.removeEventListener("keydown",S)}}),Object(r.useEffect)(function(){n.width=n.width,o=E.current,i=O.current,l.forEach(function(e){"dead"!==e.status?(t.fillStyle=e.color,t.fillRect(e.position[0],e.position[1],10,10),t.drawImage(o,e.position[0],e.position[1],10,10),e.userId===c.closestUser&&(t.beginPath(),t.strokeStyle="green",t.rect(e.position[0],e.position[1],10,10),t.lineWidth=1,t.closePath(),t.stroke(),t.beginPath(),t.strokeStyle="black",t.rect(e.position[0],e.position[1],10,10),t.lineWidth=.2,t.closePath(),t.stroke())):t.drawImage(i,e.position[0],e.position[1],10,10)})},[l,c]);var S=function(e){var t,r;switch(e.keyCode){case 37:e.preventDefault(),n.width=n.width,h(t=m-5>0?m-5:m),v(b),u.send(JSON.stringify({type:"userMoved",position:[m-5,b]}));break;case 38:e.preventDefault(),n.width=n.width,r=b-5>0?b-5:b,h(m),v(r),u.send(JSON.stringify({type:"userMoved",position:[m,b-5]}));break;case 39:e.preventDefault(),n.width=n.width,t=m+5<n.width?m+5:m,h(t),v(b),u.send(JSON.stringify({type:"userMoved",position:[m+5,b]}));break;case 40:e.preventDefault(),n.width=n.width,r=b+5<n.width?b+5:b,h(m),v(r),u.send(JSON.stringify({type:"userMoved",position:[m,b+5]}))}};return a.a.createElement(ae,null,a.a.createElement(re,{ref:w,night:s.includes("G_S_N")}),a.a.createElement("img",{src:V.a,ref:E,style:{display:"none"}}),a.a.createElement("img",{src:X.a,ref:O,style:{display:"none"}}))});function ie(){var e=Object(O.a)(["\n\tbackground: ",";\n\tborder-radius: 50%;\n\twidth: 20px;\n\theight: 20px;\n\tmargin-left: 3px;\n"]);return ie=function(){return e},e}function le(){var e=Object(O.a)(["\n\t\n"]);return le=function(){return e},e}function ce(){var e=Object(O.a)(["\n\t\t\tbox-shadow: 0px 0px 5px 3px green;\n\t\t"]);return ce=function(){return e},e}function ue(){var e=Object(O.a)(["\n\t\t\tborder: 3px solid #022a92;\n \t\t"]);return ue=function(){return e},e}function se(){var e=Object(O.a)(["\n\t\t\tborder: 3px solid red;\n\t\t\topacity: 0.5;\n \t\t"]);return se=function(){return e},e}function de(){var e=Object(O.a)(["\n\tlist-style-type: none;\n\tpadding: 5px 10px;\n\tborder: 3px solid green;\n\tborder-radius: 3px;\n\tmargin: 5px;\n\twidth: fit-content;\n\tdisplay:flex;\n\tfont-size: 20px;\n\tjustify-content: center;\n\talign-items: center;\n\t","\n\t","\n\t","\n"]);return de=function(){return e},e}function fe(){var e=Object(O.a)(["\n\n"]);return fe=function(){return e},e}function me(){var e=Object(O.a)(["\n\twidth: 25%;\n\tpadding: 20px;\n\tfont-family: monospace;\n"]);return me=function(){return e},e}var he=S.b.div(me()),pe=S.b.ul(fe()),ge=S.b.li(de(),function(e){return!e.alive&&Object(S.a)(se())},function(e){return e.isMe&&Object(S.a)(ue())},function(e){return e.closest&&Object(S.a)(ce())}),be=S.b.button(le()),ve=S.b.div(ie(),function(e){return e.backgroundColor}),ye={mafia:{start:"\u2694\ufe0f It's time to kill someone!",mid:"Move to who you want to kill ",button:"click here \u2694\ufe0f "},doctor:{start:"\ud83d\ude91 It's time to save someone! ",mid:"Move to who you want to save",button:"click here \ud83d\ude91"},detective:{start:"\ud83d\udd0d It's time to (hopefully) catch a killer",mid:"Move to who you want to find out",button:"click here \ud83d\udd0d "},lynch:{start:"\ud83d\udde1\ufe0f It's time to (hopefully) lynch a killer",mid:"Move to who you want to lynch",button:"click here \ud83d\udde1\ufe0f "}},we=Object(d.b)(function(e){return{users:e.users,currentUser:e.currentUser,gameState:e.gameState}})(function(e){var t=e.users,n=e.currentUser,r=e.handleStartGame,o=void 0===r?function(){}:r,i=e.gameState,l=e.client,c=n.username,u=function(){switch(n.role.toLowerCase()){case"mafia":l.send(JSON.stringify({type:"mafiaKill",toKill:n.closestUser}));break;case"detective":l.send(JSON.stringify({type:"detectiveCheck",toCheck:n.closestUser}));break;case"doctor":l.send(JSON.stringify({type:"doctorSave",toSave:n.closestUser}))}};return i.toLowerCase().includes(n.role.substring(0,3))&&i.includes("CHOOSE")&&"alive"!==n.status&&"mafia"!==n.role&&setTimeout(function(){u()},1e4),a.a.createElement(he,null,i.toLowerCase().includes(n.role.substring(0,3))&&i.includes("CHOOSE")&&"alive"===n.status&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h5",null," ",ye[n.role].start,a.a.createElement("br",null),ye[n.role].mid),a.a.createElement("p",null,"When you're ready: ",a.a.createElement("button",{onClick:u},ye[n.role].button))),i.toLowerCase().includes(n.role.substring(0,3))&&i.includes("RETURN")&&"alive"===n.status&&a.a.createElement("h5",null," Hurry back to where you started so they don't notice you moved!"),"alive"!==n.status&&a.a.createElement("h5",null," You are dead. "),"G_S_DAY"===i&&"alive"===n.status&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h5",null," ",ye.lynch.start,a.a.createElement("br",null),ye.lynch.mid),a.a.createElement("p",null,"When you're ready: ",a.a.createElement("button",{onClick:function(){l.send(JSON.stringify({type:"villagerLynch",toLynch:n.closestUser}))}},ye.lynch.button))),a.a.createElement("h5",null,"These are the people currently in your village: "),a.a.createElement(pe,null,t.map(function(e){var t=c&&e.username===c,r="alive"===e.status,o=e.userId===n.closestUser;return a.a.createElement(ge,{key:e.userId,alive:r,isMe:t,closest:o},!r&&"\ud83d\udc80",e.username,!r&&"\ud83d\udc80",a.a.createElement(ve,{backgroundColor:e.color})," ")}),"G_S_PREGAME"===i&&t.length>3&&a.a.createElement("div",null,"Everyone here?",a.a.createElement(be,{onClick:o},"Start Game"))))});function Ee(){var e=Object(O.a)(["\n\talign-self: center;\n\tpadding: 5px;\n\tappearance: none;\n\tborder-radius: 3px;\n\tpadding: 15px;\n\tfont-size: 20px;\n\tbackground-color: #2ed1f7;\n\tcolor: white;\n\n"]);return Ee=function(){return e},e}function Oe(){var e=Object(O.a)(["\n\tpadding: 12px 20px;\n\tborder: 5px solid black;\n\tmin-width: 25%;\n\tmargin: 40px;\n\tfont-size: 21px;\n\tline-height: 40px;\n}\n"]);return Oe=function(){return e},e}function Se(){var e=Object(O.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tmargin: 0 50px;\n"]);return Se=function(){return e},e}function xe(){var e=Object(O.a)(["\n\tborder: 5px dashed gold;\n\tborder-radius: 3px;\n\tpadding: 20px;\n\tmargin: 100px auto 0;\n\tmin-width: 500px;\n\twidth: fit-content;\n\ttext-align: center;\n\tfont-size: 30px;\n"]);return xe=function(){return e},e}function ke(){var e=Object(O.a)(["\n\twidth: 100%;\n\tfont-family: monospace;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return ke=function(){return e},e}var je=S.b.div(ke()),Ue=S.b.div(xe()),Ne=S.b.div(Se()),Me=S.b.div(Oe()),Ce=S.b.button(Ee()),Ie=Object(d.b)(function(e){return{users:e.users,gameState:e.gameState,currentUser:e.currentUser}})(function(e){var t=e.users,n=e.currentUser,r=e.gameState,o=e.client,i="mafia"===n.role,l="G_S_MAFIA_WIN"===r;return a.a.createElement(je,null,(i&&l||!i&&!l)&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Ue,null,"\ud83c\udf8a You have successfully defeated the ",l?"village":"Mafia","! \ud83c\udf8a")),(i&&!l||!i&&l)&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Ue,null,"You were defeated by the ",l?"Mafia":"village","!")),a.a.createElement(Ne,null,a.a.createElement(Me,null,"Villagers:",t.filter(function(e){return"mafia"!==e.role}).map(function(e){return a.a.createElement("div",{key:e.userId},"alive"!==e.status?"\u26b0\ufe0f":"",e.username,a.a.createElement("div",{style:{transform:"scaleX(-1)",display:"inline-block"}},"alive"!==e.status?"\u26b0\ufe0f":""))})),a.a.createElement(Me,null,"Mafia:",t.filter(function(e){return"mafia"===e.role}).map(function(e){return a.a.createElement("div",{key:e.id},"alive"!==e.status?"\u26b0\ufe0f":"",e.username,a.a.createElement("div",{style:{transform:"scaleX(-1)",display:"inline-block"}},"alive"!==e.status?"\u26b0\ufe0f":""))}))),a.a.createElement(Ce,{onClick:function(){o.send(JSON.stringify({type:"restartGame"})),setTimeout(function(){return window.location.reload(!1)},500)}},"Start New Game"))});function Je(){var e=Object(O.a)(["\n\twidth: 100%;\n\theight: 110vh;\n\tbackground: no-repeat url(",") 0 0;\n\tbackground-size: contain;\n"]);return Je=function(){return e},e}function Te(){var e=Object(O.a)([" \n\twidth: 75%;\n"]);return Te=function(){return e},e}function _e(){var e=Object(O.a)(["\n\tdisplay: flex;\n"]);return _e=function(){return e},e}var Re=S.b.div(_e()),Ge=S.b.div(Te()),De=S.b.div(Je(),$.a),We=Object(d.b)(function(e){return{gameState:e.gameState}})(function(e){var t=e.client,n=e.shouldBeVisible,r=e.gameState;return a.a.createElement(Re,null,r.includes("WIN")?a.a.createElement(Ie,{client:t}):a.a.createElement(a.a.Fragment,null," ",n?a.a.createElement(oe,{client:t}):a.a.createElement(Ge,null,a.a.createElement(De,null)),a.a.createElement(we,{client:t,handleStartGame:function(){console.log("Starting Game"),t.send(JSON.stringify({type:"gameStart"}))}})))});n(44),n(45),n(46);function Ae(){var e=Object(O.a)(["\n\tbackground-color: white;\n\tmargin: auto;\n\tpadding: 20px;\n\tborder: 1px solid #888;\n\twidth: 80%;\n\ttext-align: center;\n"]);return Ae=function(){return e},e}function ze(){var e=Object(O.a)(["\n\tdisplay: ","; /* Hidden by default */\n\tposition: fixed; /* Stay in place */\n\tz-index: 1; /* Sit on top */\n\tpadding-top: 100px; /* Location of the box */\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%; \n\theight: 100%; \n\tbackground-color: rgb(0,0,0); \n\tbackground-color: rgba(0,0,0,0.4); \n"]);return ze=function(){return e},e}var Le=S.b.div(ze(),function(e){return e.show?"block":"none"}),He=S.b.div(Ae()),Pe=function(e){var t=e.show,n=e.message;return a.a.createElement(Le,{show:t},a.a.createElement(He,null,n))};function Ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(b.a)(e);if(t){var a=Object(b.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(g.a)(this,n)}}var Fe=new v.w3cwebsocket("wss://gentle-ridge-18754.herokuapp.com/"),Ke=function(e){Object(p.a)(n,e);var t=Ye(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).logInUser=function(e){if(r.setState({username:e}),e.trim()){var t={username:e};Fe.send(JSON.stringify(Object(c.a)({},t,{type:"userJoined"})))}},r.triggerNightTime=function(){Fe.send(JSON.stringify({type:"nightAll"}))},r.onEditorStateChange=function(e){Fe.send(JSON.stringify({type:"contentchange",username:r.state.username,content:e}))},r.triggerShowDetectiveModal=function(e){if("detective"===r.props.currentUser.role){var t="They are ".concat(e?"":"not ","a member of the Mafia.");r.setState({message:t,showModal:!0})}},r.showMurderModal=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"villagerKilled":t="\ud83d\ude31 A villager just died! They went by the name of ".concat(n.username,", may they Rest in Peace.");break;case"mafiaKilled":t="You chose to kill ".concat(n.username,". Well done, they were a member of the Mafia! \u2694\ufe0f ");break;case"noneKilled":t="Amen! No one died last night.";break;default:t="Not really sure what happened here... "}r.setState({message:t,showModal:!0}),setTimeout(function(){return r.setState({message:null,showModal:!1})},4e3)},r.state={username:null,message:"",showModal:!1},r.logInUser=r.logInUser.bind(Object(h.a)(r)),r}return Object(m.a)(n,[{key:"componentWillMount",value:function(){var e=this;Fe.onopen=function(){console.log("WebSocket Client Connected")},Fe.onmessage=function(t){var n=JSON.parse(t.data),r={};n.type&&n.users&&"noneKilled"!==n.type?(r.users=n.users,r.currentUser=n.currentUser,r.gameState=n.gameState,e.props.handleUserJoined(r),e.setState(Object(c.a)({},r))):"detectiveCheck"===n.type?e.triggerShowDetectiveModal(n.result):n.type.toLowerCase().includes("killed")?e.showMurderModal(n.type,n.victim||""):"contentchange"===t.type&&(r.text=n.data.editorContent||"Start writing your document here")}}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.gameState,r=t&&t.username&&(!n.includes("G_S_N")||n.toLowerCase().includes(t.role.substring(0,3)));return a.a.createElement(a.a.Fragment,null,a.a.createElement(F,{triggerNightTime:this.triggerNightTime}),a.a.createElement("div",{className:"container-fluid"},t&&t.username?a.a.createElement(We,{shouldBeVisible:r,client:Fe}):a.a.createElement(Y,{logInUser:this.logInUser})),a.a.createElement(Pe,{show:this.state.showModal,message:this.state.message}))}}]),n}(r.Component),Ve=Object(d.b)(function(e){return{currentUser:e.currentUser,gameState:e.gameState}},function(e){return{handleUserJoined:function(t){return e({type:"JOINED",payload:t})},handleUsersChanged:function(t){return e({type:"USERS_CHANGED",payload:t})}}})(Ke),Be=function(){return a.a.createElement(d.a,{store:s},a.a.createElement(Ve,null))};i.a.render(a.a.createElement(Be,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.50853683.chunk.js.map