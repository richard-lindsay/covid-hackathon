(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/canvas.21421f34.jpeg"},24:function(e,t,n){e.exports=n.p+"static/media/headerimg.16d5a4f4.png"},25:function(e,t,n){e.exports=n.p+"static/media/face.4809883a.png"},26:function(e,t,n){e.exports=n.p+"static/media/daycanvas.1ec1becf.jpg"},29:function(e,t,n){e.exports=n(47)},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(8),c=n.n(o),i=n(9),u=n(4),s={users:[],currentUser:{username:"",position:[0,0]},gameState:"G_S_PREGAME"},l=Object(i.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"JOINED":return Object(u.a)({},e,{users:t.payload.users,currentUser:t.payload.currentUser,gameState:t.payload.gameState});case"USERS_CHANGED":return Object(u.a)({},e,{users:t.payload.users});default:return Object(u.a)({},e)}}),d=n(3),m=n(17),f=n(18),h=n(10),g=n(27),p=n(28),b=n(13),v=n(19),y=n(7),w=n(20),E=n.n(w),S=function(e){var t=e.logInUser,n=Object(r.useState)(""),o=Object(y.a)(n,2),c=o[0],i=o[1];return a.a.createElement("div",{className:"account"},a.a.createElement("div",{className:"account__wrapper"},a.a.createElement("div",{className:"account__card"},a.a.createElement("div",{className:"account__profile"},a.a.createElement(E.a,{className:"account__avatar",size:64,string:"randomness"}),a.a.createElement("p",{className:"account__name"},"Hello, user!"),a.a.createElement("p",{className:"account__sub"},"Join to edit the document")),a.a.createElement("input",{name:"username",onChange:function(e){return i(e.target.value)},value:c,className:"form-control"}),a.a.createElement("button",{type:"button",onClick:function(){return t(c)},className:"btn btn-primary account__btn"},"Join"))))},O=n(1),j=n(2);function k(){var e=Object(O.a)(["\n"]);return k=function(){return e},e}function x(){var e=Object(O.a)([" \n\talign-self: center;\n\theight: 90px;\n\n"]);return x=function(){return e},e}function N(){var e=Object(O.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\theight: 90px;\n\tpadding: 20px;\n\tfont-family: monospace;\n\tfont-size: 20px;\n\tbackground-color: #2ed1f7;\n\tjustify-content: space-between;\n\tcolor: white;\n\n"]);return N=function(){return e},e}var U=j.b.div(N()),_=j.b.img(x()),M=j.b.button(k()),C=n(24),J=n.n(C),G=Object(d.b)(function(e){return{currentUser:e.currentUser,gameState:e.gameState}})(function(e){var t=e.currentUser,n=e.gameState,r=e.triggerNightTime;return a.a.createElement(U,null,a.a.createElement("div",null,a.a.createElement(_,{src:J.a}),t.username?a.a.createElement("span",null," Hello, ",t.username):a.a.createElement("span",null," Hello! Welcome to St George's Village.")),!n.includes("G_S_N")&&!n.includes("G_S_PREGAME")&&a.a.createElement(M,{onClick:r},"Trigger Night Time"),t.username&&a.a.createElement("span",null,t.role&&"unassigned"!==t.role?"You are a ".concat(t.role):"Wait for your role to be dealt!"))}),I=n(25),R=n.n(I),T=n(26),D=n.n(T),L=n(11),A=n.n(L);function P(){var e=Object(O.a)([" \n\twidth: 75%;\n"]);return P=function(){return e},e}function W(){var e=Object(O.a)(["\n\theight: 110%;\n\twidth: 100%;\n\tbackground: url(",") repeat 0 0;\n\tbackground-size: cover;\n"]);return W=function(){return e},e}function H(){var e=Object(O.a)(["\n\tdisplay: none;\n"]);return H=function(){return e},e}j.b.img(H());var z=j.b.canvas(W(),function(e){return e.night?A.a:D.a}),K=j.b.div(P()),B=Object(d.b)(function(e){return{users:e.users,currentUser:e.currentUser,gameState:e.gameState}})(function(e){var t,n,o,c=e.users,i=e.currentUser,u=e.client,s=e.gameState,l=Object(r.useState)(i.position[0]),d=Object(y.a)(l,2),m=d[0],f=d[1],h=Object(r.useState)(i.position[1]),g=Object(y.a)(h,2),p=g[0],b=g[1],v=Object(r.useRef)(null),w=Object(r.useRef)(null);Object(r.useEffect)(function(){return n=v.current,t=n.getContext("2d"),"alive"===i.status&&window&&window.addEventListener("keydown",E,!1),function(){return window.removeEventListener("keydown",E)}}),Object(r.useEffect)(function(){n.width=n.width,o=w.current,c.forEach(function(e){"dead"!==e.status&&(t.fillStyle=e.color,t.fillRect(e.position[0],e.position[1],10,10),t.drawImage(o,e.position[0],e.position[1],10,10),e.userId===i.closestUser&&(t.beginPath(),t.strokeStyle="green",t.rect(e.position[0],e.position[1],10,10),t.lineWidth=1,t.closePath(),t.stroke(),t.beginPath(),t.strokeStyle="black",t.rect(e.position[0],e.position[1],10,10),t.lineWidth=.2,t.closePath(),t.stroke()))})},[c,i]);var E=function(e){var t,r;switch(e.preventDefault(),e.keyCode){case 37:n.width=n.width,f(t=m-5>0?m-5:m),b(p),u.send(JSON.stringify({type:"userMoved",position:[m-5,p]}));break;case 38:n.width=n.width,r=p-5>0?p-5:p,f(m),b(r),u.send(JSON.stringify({type:"userMoved",position:[m,p-5]}));break;case 39:n.width=n.width,t=m+5<n.width?m+5:m,f(t),b(p),u.send(JSON.stringify({type:"userMoved",position:[m+5,p]}));break;case 40:n.width=n.width,r=p+5<n.width?p+5:p,f(m),b(r),u.send(JSON.stringify({type:"userMoved",position:[m,p+5]}))}};return a.a.createElement(K,null,a.a.createElement(z,{ref:v,night:s.includes("G_S_N")}),a.a.createElement("img",{src:R.a,ref:w,style:{display:"none"}}))});function F(){var e=Object(O.a)(["\n\tbackground: ",";\n\tborder-radius: 50%;\n\twidth: 20px;\n\theight: 20px;\n\tmargin-left: 3px;\n"]);return F=function(){return e},e}function V(){var e=Object(O.a)(["\n\t\n"]);return V=function(){return e},e}function Y(){var e=Object(O.a)(["\n\t\t\tbox-shadow: 0px 0px 5px 3px green;\n\t\t"]);return Y=function(){return e},e}function q(){var e=Object(O.a)(["\n\t\t\tborder: 3px solid #022a92;\n \t\t"]);return q=function(){return e},e}function Q(){var e=Object(O.a)(["\n\t\t\tborder: 3px solid red;\n\t\t\topacity: 0.5;\n \t\t"]);return Q=function(){return e},e}function X(){var e=Object(O.a)(["\n\tlist-style-type: none;\n\tpadding: 5px 10px;\n\tborder: 3px solid green;\n\tborder-radius: 3px;\n\tmargin: 5px;\n\twidth: fit-content;\n\tdisplay:flex;\n\tfont-size: 20px;\n\tjustify-content: center;\n\talign-items: center;\n\t","\n\t","\n\t","\n"]);return X=function(){return e},e}function Z(){var e=Object(O.a)(["\n\n"]);return Z=function(){return e},e}function $(){var e=Object(O.a)(["\n\twidth: 25%;\n\tpadding: 20px;\n\tfont-family: monospace;\n"]);return $=function(){return e},e}var ee=j.b.div($()),te=j.b.ul(Z()),ne=j.b.li(X(),function(e){return!e.alive&&Object(j.a)(Q())},function(e){return e.isMe&&Object(j.a)(q())},function(e){return e.closest&&Object(j.a)(Y())}),re=j.b.button(V()),ae=j.b.div(F(),function(e){return e.backgroundColor}),oe={mafia:{start:"\u2694\ufe0f It's time to kill someone!",mid:"Move to who you want to kill ",button:"click here \u2694\ufe0f "},doctor:{start:"\ud83d\ude91 It's time to save someone! ",mid:"Move to who you want to save",button:"click here \ud83d\ude91"},detective:{start:"\ud83d\udd0d It's time to (hopefully) catch a killer",mid:"Move to who you want to find out",button:"click here \ud83d\udd0d "},lynch:{start:"\ud83d\udde1\ufe0f It's time to (hopefully) lynch a killer",mid:"Move to who you want to lynch",button:"click here \ud83d\udde1\ufe0f "}},ce=Object(d.b)(function(e){return{users:e.users,currentUser:e.currentUser,gameState:e.gameState}})(function(e){var t=e.users,n=e.currentUser,r=e.handleStartGame,o=void 0===r?function(){}:r,c=e.gameState,i=e.client,u=n.username;return a.a.createElement(ee,null,c.toLowerCase().includes(n.role.substring(0,3))&&c.includes("CHOOSE")&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h5",null," ",oe[n.role].start,a.a.createElement("br",null),oe[n.role].mid),a.a.createElement("p",null,"When you're ready: ",a.a.createElement("button",{onClick:function(){switch(n.role.toLowerCase()){case"mafia":i.send(JSON.stringify({type:"mafiaKill",toKill:n.closestUser}));break;case"detective":i.send(JSON.stringify({type:"detectiveCheck",toCheck:n.closestUser}));break;case"doctor":i.send(JSON.stringify({type:"doctorSave",toSave:n.closestUser}))}}},oe[n.role].button))),c.toLowerCase().includes(n.role.substring(0,3))&&c.includes("RETURN")&&a.a.createElement("h5",null," Hurry back to where you started so they don't notice you moved!"),"G_S_DAY"===c&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h5",null," ",oe.lynch.start,a.a.createElement("br",null),oe.lynch.mid),a.a.createElement("p",null,"When you're ready: ",a.a.createElement("button",{onClick:function(){i.send(JSON.stringify({type:"villagerLynch",toLynch:n.closestUser}))}},oe.lynch.button))),a.a.createElement("h5",null,"These are the people currently in your village: "),a.a.createElement(te,null,t.map(function(e){var t=u&&e.username===u,r="alive"===e.status,o=e.userId===n.closestUser;return a.a.createElement(ne,{key:e.userId,alive:r,isMe:t,closest:o},!r&&"\ud83d\udc80",e.username,!r&&"\ud83d\udc80",a.a.createElement(ae,{backgroundColor:e.color})," ")}),"G_S_PREGAME"===c&&t.length>3&&a.a.createElement("div",null,"Everyone here?",a.a.createElement(re,{onClick:o},"Start Game"))))});function ie(){var e=Object(O.a)(["\n\twidth: 100%;\n\theight: 110vh;\n\tbackground: no-repeat url(",") 0 0;\n\tbackground-size: contain;\n"]);return ie=function(){return e},e}function ue(){var e=Object(O.a)([" \n\twidth: 75%;\n"]);return ue=function(){return e},e}function se(){var e=Object(O.a)(["\n\tdisplay: flex;\n"]);return se=function(){return e},e}var le=j.b.div(se()),de=j.b.div(ue()),me=j.b.div(ie(),A.a),fe=function(e){var t=e.client,n=e.shouldBeVisible;return a.a.createElement(le,null,n?a.a.createElement(B,{client:t}):a.a.createElement(de,null,a.a.createElement(me,null)),a.a.createElement(ce,{client:t,handleStartGame:function(){console.log("Starting Game"),t.send(JSON.stringify({type:"gameStart"}))}}))};n(44),n(45),n(46);function he(){var e=Object(O.a)(["\n\tbackground-color: white;\n\tmargin: auto;\n\tpadding: 20px;\n\tborder: 1px solid #888;\n\twidth: 80%;\n\ttext-align: center;\n"]);return he=function(){return e},e}function ge(){var e=Object(O.a)(["\n\tdisplay: ","; /* Hidden by default */\n\tposition: fixed; /* Stay in place */\n\tz-index: 1; /* Sit on top */\n\tpadding-top: 100px; /* Location of the box */\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%; \n\theight: 100%; \n\tbackground-color: rgb(0,0,0); \n\tbackground-color: rgba(0,0,0,0.4); \n"]);return ge=function(){return e},e}var pe=j.b.div(ge(),function(e){return e.show?"block":"none"}),be=j.b.div(he()),ve=function(e){var t=e.show,n=e.message;return a.a.createElement(pe,{show:t},a.a.createElement(be,null,n))};function ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(b.a)(e);if(t){var a=Object(b.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var we=new v.w3cwebsocket("ws://127.0.0.1:8080"),Ee=function(e){Object(g.a)(n,e);var t=ye(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).logInUser=function(e){if(r.setState({username:e}),e.trim()){var t={username:e};we.send(JSON.stringify(Object(u.a)({},t,{type:"userJoined"})))}},r.triggerNightTime=function(){we.send(JSON.stringify({type:"nightAll"}))},r.onEditorStateChange=function(e){we.send(JSON.stringify({type:"contentchange",username:r.state.username,content:e}))},r.triggerShowDetectiveModal=function(e){if("detective"===r.props.currentUser.role){var t="They are ".concat(e?"":"not ","a member of the Mafia.");r.setState({message:t,showModal:!0}),setTimeout(function(){return r.setState({message:null,showModal:!1})},3e3)}},r.showMurderModal=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"villagerKilled":t="\ud83d\ude31 A villager just died! They went by the name of ".concat(n.username,", may they Rest in Peace.");break;case"mafiaKilled":t="You chose to kill ".concat(n.username,". Well done, they were a member of the Mafia! \u2694\ufe0f ");break;case"noneKilled":t="Amen! No one died.";break;default:t="Not really sure what happened here... "}r.setState({message:t,showModal:!0}),setTimeout(function(){return r.setState({message:null,showModal:!1})},4e3)},r.state={username:null,message:"",showModal:!1},r.logInUser=r.logInUser.bind(Object(h.a)(r)),r}return Object(f.a)(n,[{key:"componentWillMount",value:function(){var e=this;we.onopen=function(){console.log("WebSocket Client Connected")},we.onmessage=function(t){var n=JSON.parse(t.data),r={};n.type&&n.users&&"noneKilled"!==n.type?(r.users=n.users,r.currentUser=n.currentUser,r.gameState=n.gameState,e.props.handleUserJoined(r),e.setState(Object(u.a)({},r))):"detectiveCheck"===n.type?e.triggerShowDetectiveModal(n.result):n.type.toLowerCase().includes("killed")?e.showMurderModal(n.type,n.victim||""):"contentchange"===t.type&&(r.text=n.data.editorContent||"Start writing your document here")}}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.gameState,r=t.username&&(!n.includes("G_S_N")||n.toLowerCase().includes(t.role.substring(0,3)));return a.a.createElement(a.a.Fragment,null,a.a.createElement(G,{triggerNightTime:this.triggerNightTime}),a.a.createElement("div",{className:"container-fluid"},t.username?a.a.createElement(fe,{shouldBeVisible:r,client:we}):a.a.createElement(S,{logInUser:this.logInUser})),a.a.createElement(ve,{show:this.state.showModal,message:this.state.message}))}}]),n}(r.Component),Se=Object(d.b)(function(e){return{currentUser:e.currentUser,gameState:e.gameState}},function(e){return{handleUserJoined:function(t){return e({type:"JOINED",payload:t})},handleUsersChanged:function(t){return e({type:"USERS_CHANGED",payload:t})}}})(Ee),Oe=function(){return a.a.createElement(d.a,{store:l},a.a.createElement(Se,null))};c.a.render(a.a.createElement(Oe,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.d79274f3.chunk.js.map